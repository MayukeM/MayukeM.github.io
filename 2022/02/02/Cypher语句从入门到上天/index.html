

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="myk">
  <meta name="keywords" content="">
  
    <meta name="description" content="cypher语句大全下载和安装neo4j 教程_w3cschool Neo4j windows 桌面版 下载地址：Neo4j Desktop Download | Free Graph Database Download Cypher语言的关键字不区分大小写，但是属性值，标签，关系类型和变量是区分大小写的。 Neo4j中不存在表的概念，只有**标签(labels),节点(Node),关联(Rela">
<meta property="og:type" content="article">
<meta property="og:title" content="Cypher语句从入门到上天">
<meta property="og:url" content="http://example.com/2022/02/02/Cypher%E8%AF%AD%E5%8F%A5%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%B8%8A%E5%A4%A9/index.html">
<meta property="og:site_name" content="我的博客">
<meta property="og:description" content="cypher语句大全下载和安装neo4j 教程_w3cschool Neo4j windows 桌面版 下载地址：Neo4j Desktop Download | Free Graph Database Download Cypher语言的关键字不区分大小写，但是属性值，标签，关系类型和变量是区分大小写的。 Neo4j中不存在表的概念，只有**标签(labels),节点(Node),关联(Rela">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/MayukeM/MayukeM.github.io@master/img/cypher.png">
<meta property="article:published_time" content="2022-02-02T02:42:22.000Z">
<meta property="article:modified_time" content="2022-02-03T09:56:04.897Z">
<meta property="article:author" content="myk">
<meta property="article:tag" content="neo4j">
<meta property="article:tag" content="cypher">
<meta property="article:tag" content="知识图谱">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/MayukeM/MayukeM.github.io@master/img/cypher.png">
  
  
  <title>Cypher语句从入门到上天 - 我的博客</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="我的博客" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>myk</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                更多
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="http://124.222.11.46:2021/#/home">
                    
                    公司官网
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://www.yuque.com/mayuke">
                    
                    访问主站
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://github.com/MayukeM/">
                    
                    GitHub
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/MayukeM/MayukeM.github.io@master/img/b6.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Cypher语句从入门到上天">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-02-02 10:42" pubdate>
        2022年2月2日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      17k 字
    </span>
  

  

  
  
    
      <!-- 不蒜子统计文章PV -->
      <span id="busuanzi_container_page_pv" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="busuanzi_value_page_pv"></span> 次
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Cypher语句从入门到上天</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2022年2月3日 下午
                
              </p>
            
            <div class="markdown-body">
              <h1 id="cypher语句大全"><a href="#cypher语句大全" class="headerlink" title="cypher语句大全"></a>cypher语句大全</h1><h2 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a><strong>下载和安装</strong></h2><p><a target="_blank" rel="noopener" href="https://www.w3cschool.cn/neo4j/">neo4j 教程_w3cschool</a></p>
<p>Neo4j windows 桌面版 下载地址：<a target="_blank" rel="noopener" href="https://neo4j.com/download/?ref=get-started-dropdown-cta">Neo4j Desktop Download | Free Graph Database Download</a></p>
<p>Cypher语言的关键字不区分大小写，但是属性值，标签，关系类型和变量是区分大小写的。</p>
<p>Neo4j中不存在表的概念，只有**标签(labels),节点(Node),关联(Relation),路径(path)**，标签里存的节点,节点和关联可以简单理解为图里面的点和边,路径是用节点和关联表示的如：(a)-[r]-&gt;(b)，表示一条从节点a经关联r到节点b的路径。</p>
<p>在数据查询中，节点一般用**小括号()，关联用中括号[]**。</p>
<span id="more"></span>

<p><strong>关于Neo4j和Cypher批量更新和批量插入优化的5个建议</strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hwz2311245/article/details/60963383"><strong>https://blog.csdn.net/hwz2311245/article/details/60963383</strong></a></p>
<p><strong>Neo4j之Cypher学习总结</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/2bb98c81d8ee"><strong>https://www.jianshu.com/p/2bb98c81d8ee</strong></a></p>
<h2 id="常用cypher语句"><a href="#常用cypher语句" class="headerlink" title="常用cypher语句"></a>常用cypher语句</h2><p><strong>快速清空数据库</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><div class="code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><pre><code class="hljs cypher">match (n) detach delete n<br></code></pre></td></tr></table></figure>

<p><strong>创造一个节点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:Person &#123;name:&quot;我&quot;, age:21&#125;)<br></code></pre></td></tr></table></figure>

<p><strong>创建关系</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (p:Person &#123;name:&quot;我&quot;, age:&quot;23&quot;&#125;)-[:包工程&#123;金额:10000&#125;]-&gt;(n:Person &#123;name:&quot;好大哥&quot;, age:&quot;35&quot;&#125;)<br></code></pre></td></tr></table></figure>

<p> <strong>删除节点</strong>    注意 删除有连接的节点时  必须先删掉关系  </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:Person &#123;name:&quot;XL&quot;, age:23&#125;)<br>match (n:Person &#123;name:&quot;XL&quot;&#125;) delete n<br></code></pre></td></tr></table></figure>

<p><strong>删除关系</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (p:Person &#123;name:&quot;我&quot;, age:&quot;23&quot;&#125;)-[f:包工程&#123;金额:10000&#125;]-&gt;(n:Person &#123;name:&quot;好大哥&quot;, age:&quot;35&quot;&#125;) delete f<br></code></pre></td></tr></table></figure>

<p><strong>加上标签</strong></p>
<p>同个某个节点的id   找到它   然后给其设置一个好人的标签</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (t:Person) where id(t)=2 set t:好人 return t<br></code></pre></td></tr></table></figure>

<p><strong>额外增加属性</strong></p>
<p>在好人标签中找一个节点的id为2  然后给其加一个战斗力属性  并设置其值为200</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (a:好人) where id(a)=2 set a.战斗力=200 return a<br></code></pre></td></tr></table></figure>

<p><strong>查找</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (:Person &#123;name:&quot;唐僧&quot;, age:&quot;79&quot;&#125;)-[:师傅 &#123;s_time:&quot;2020-11-23&quot;&#125;]-&gt;(:Person &#123;name:&quot;孙悟空&quot;, age:&quot;1w&quot;&#125;)<br>match (a:Person)-[:师傅]-&gt;(b:Person) return a,b<br></code></pre></td></tr></table></figure>

<p><strong>显示所有节点关系</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n) return n<br></code></pre></td></tr></table></figure>

<p><strong>删除节点关系</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person) OPTIONAL MATCH (a)-[r1]-() DELETE a, r1<br></code></pre></td></tr></table></figure>

<p><strong>查找人员</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (tom &#123;name: &quot;Tom Hanks&quot;&#125;) RETURN tom<br></code></pre></td></tr></table></figure>



<h2 id="1-创建节点"><a href="#1-创建节点" class="headerlink" title="1.创建节点"></a><strong>1.创建节点</strong></h2><p>创建Person 标签,刘德华等若干节点,各自有name,birthday ,born,englishname等属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:Person &#123; name: &#x27;朱丽倩&#x27;, birthday:&#x27;1966年4月6日&#x27;,born: 1966 ,englishname:&#x27;Carol&#x27;&#125;);<br>create (n:Person &#123; name: &#x27;刘向蕙&#x27;, birthday:&#x27;2012年5月9日&#x27;,born: 2012 ,englishname:&#x27;Hanna&#x27;&#125;);<br>create (n:Person &#123; name: &#x27;任贤齐&#x27;, birthday:&#x27;1966年6月23日&#x27;,born: 1966 ,englishname:&#x27;Richie Jen&#x27;&#125;);<br>create (n:Person &#123; name: &#x27;金城武&#x27;, birthday:&#x27;1973年10月11日&#x27;,born: 1973,englishname:&#x27;Takeshi Kaneshiro&#x27;&#125;);<br>create (n:Person &#123; name: &#x27;林志玲&#x27;, birthday:&#x27;1974年11月29日&#x27;,born: 1974,englishname:&#x27;zhilin&#x27;&#125;);<br>create (n:Person &#123; name: &#x27;刘德华&#x27;, birthday:&#x27;1961年9月27日&#x27;,born: 1961,englishname:&#x27;Andy Lau&#x27;&#125;);<br></code></pre></td></tr></table></figure>

<p>创建Movie 标签,彩云曲等若干节点,各自有title,released 等属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:Movie &#123; title: &#x27;彩云曲&#x27;,released: 1981&#125;);<br>create (n:Movie &#123; title: &#x27;神雕侠侣&#x27;,released: 1983&#125;);<br>create (n:Movie &#123; title: &#x27;暗战&#x27;,released: 2000&#125;);<br>create (n:Movie &#123; title: &#x27;拆弹专家&#x27;,released: 2017&#125;);<br></code></pre></td></tr></table></figure>

<h2 id="2-查询节点"><a href="#2-查询节点" class="headerlink" title="2.查询节点"></a><strong>2.查询节点</strong></h2><h3 id="2-1-查询整个图形数据库"><a href="#2-1-查询整个图形数据库" class="headerlink" title="2.1 查询整个图形数据库:"></a><strong>2.1 查询整个图形数据库:</strong></h3><p>点击节点，查看节点的属性，如图，Neo4j自动为节点设置ID值 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/Bu7n5cQGeFzNoxV.png" srcset="/img/loading.gif" lazyload alt="image-20220202110925533"></p>
<h3 id="2-2-查询具有指定标签的节点"><a href="#2-2-查询具有指定标签的节点" class="headerlink" title="2.2 查询具有指定标签的节点"></a><strong>2.2 查询具有指定标签的节点</strong></h3><p>查询Movie标签下的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n:Movie) return n;  <br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/txEYNlFX62jJvDy.png" srcset="/img/loading.gif" lazyload alt="image-20220202111032896"></p>
<h3 id="2-3-where-谓词查询"><a href="#2-3-where-谓词查询" class="headerlink" title="2.3 where 谓词查询"></a><strong>2.3 where</strong> <strong>谓词查询</strong></h3><p>查询名称为林志玲的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:Person) where n.name=&#x27;林志玲&#x27; return n<br></code></pre></td></tr></table></figure>

<p>**(查询具有指定属性的节点)**结果相同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n&#123;name:&#x27;林志玲&#x27;&#125;) return n;<br></code></pre></td></tr></table></figure>

<p>查询born属性小于1967的节点 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where n.born&lt;1967 return n; <br></code></pre></td></tr></table></figure>

<h2 id="3-创建关系"><a href="#3-创建关系" class="headerlink" title="3.创建关系"></a><strong>3.创建关系</strong></h2><p>关系的构成：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">StartNode - [Variable:RelationshipType&#123;Key1:Value1,Key2:Value2&#125;] -&gt; EndNode<br></code></pre></td></tr></table></figure>

<p>在创建关系时，必须指定关系类型。</p>
<h3 id="3-1-创建没有任何属性的关系"><a href="#3-1-创建没有任何属性的关系" class="headerlink" title="3.1 创建没有任何属性的关系"></a><strong>3.1 创建没有任何属性的关系</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(b:Movie)<br>WHERE a.name = &#x27;刘德华&#x27; AND b.title = &#x27;暗战&#x27;<br>CREATE (a)-[r:DIRECTED]-&gt;(b)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p>得到结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;identity&quot;</span>: <span class="hljs-number">2</span>,<br>  <span class="hljs-attr">&quot;start&quot;</span>: <span class="hljs-number">9</span>,<br>  <span class="hljs-attr">&quot;end&quot;</span>: <span class="hljs-number">7</span>,<br>  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;DIRECTED&quot;</span>,<br>  <span class="hljs-attr">&quot;properties&quot;</span>: &#123;<br><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/DLJSuTd6yRVBcli.png" srcset="/img/loading.gif" lazyload alt="image-20220203101836271"></p>
<h3 id="3-2-创建关系，并设置关系的属性"><a href="#3-2-创建关系，并设置关系的属性" class="headerlink" title="3.2 创建关系，并设置关系的属性"></a><strong>3.2 创建关系，并设置关系的属性</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(b:Movie)<br>WHERE a.name = &#x27;刘德华&#x27; AND b.title = &#x27;神雕侠侣&#x27;<br>CREATE (a)-[r:出演 &#123; roles:[&#x27;杨过&#x27;] &#125;]-&gt;(b)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p>得到结果：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json">&#123;<br>  <span class="hljs-attr">&quot;identity&quot;</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">&quot;start&quot;</span>: <span class="hljs-number">9</span>,<br>  <span class="hljs-attr">&quot;end&quot;</span>: <span class="hljs-number">6</span>,<br>  <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;出演&quot;</span>,<br>  <span class="hljs-attr">&quot;properties&quot;</span>: &#123;<br><span class="hljs-attr">&quot;roles&quot;</span>: [<br>      <span class="hljs-string">&quot;杨过&quot;</span><br>    ]<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/i4L2GhUzAkvjaOc.png" srcset="/img/loading.gif" lazyload alt="image-20220203100212404"></p>
<h3 id="3-3-创建双向关系"><a href="#3-3-创建双向关系" class="headerlink" title="3.3 创建双向关系"></a><strong>3.3 创建双向关系</strong></h3><p>刘德华的女是刘向蕙,刘向蕙的父亲是刘德华</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Person)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;刘向蕙&#x27;<br>CREATE (a)-[r:父亲 &#123; nickname:&#x27;甜心&#x27; &#125;]-&gt;(c),<br>(c)-[d:女儿 &#123; nickname:&#x27;爹地&#x27; &#125;]-&gt;(a)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p>关系建错了  删除关系 (见<strong>5.2</strong> )</p>
<p>重新创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Person)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;刘向蕙&#x27;<br>CREATE (a)-[d:女儿 &#123; nickname:&#x27;甜心&#x27; &#125;]-&gt;(c),<br>(c)-[r:父亲 &#123; nickname:&#x27;爹地&#x27; &#125;]-&gt;(a)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/YavpdHserRAy4mW.png" srcset="/img/loading.gif" lazyload alt="image-20220203102036130"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Movie)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.title = &#x27;彩云曲&#x27;<br>CREATE (a)-[r:出演 &#123; partner:&#x27;张国荣&#x27; &#125;]-&gt;(c),<br>(c)-[d:演员 &#123; rolename:&#x27;阿华哥&#x27; &#125;]-&gt;(a)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/kwvpDYWjxlnMAJC.png" srcset="/img/loading.gif" lazyload alt="image-20220203102237935"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Movie)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.title = &#x27;拆弹专家&#x27;<br>CREATE (a)-[r:出演 &#123; partner:&#x27;赵薇,高圆圆&#x27; &#125;]-&gt;(c),<br>(c)-[d:演员 &#123; rolename:&#x27;华仔&#x27; &#125;]-&gt;(a)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/YyOjUJkwfoRrZxM.png" srcset="/img/loading.gif" lazyload alt="image-20220203102402590"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Movie)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.title = &#x27;神雕侠侣&#x27;<br>CREATE (a)-[r:出演 &#123; partner:&#x27;刘亦菲&#x27; &#125;]-&gt;(c),<br>(c)-[d:演员 &#123; rolename:&#x27;杨过&#x27; &#125;]-&gt;(a)<br>RETURN r;<br></code></pre></td></tr></table></figure>



<p>继续新增关系  刘德华和林志玲,金城武,任贤齐</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Person)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;任贤齐&#x27;<br>CREATE (a)-[d:朋友 &#123; sex:&#x27;男&#x27; &#125;]-&gt;(c)<br>RETURN d;<br><br>MATCH (a:Person),(c:Person)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;金城武&#x27;<br>CREATE (a)-[d:朋友 &#123; sex:&#x27;男&#x27; &#125;]-&gt;(c)<br>RETURN d;<br></code></pre></td></tr></table></figure>

<p> 下面这个没有给关系设置属性sex</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:Person)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;林志玲&#x27;<br>CREATE (a)-[d:朋友]-&gt;(c)<br>RETURN d;          <br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (a:Person), (b:Person) <br>where a.name=&quot;刘德华&quot; and b.name=&quot;朱丽倩&quot;<br>create (a)-[c:wife]-&gt;(b)<br>return c;<br></code></pre></td></tr></table></figure>

<p>查询Person表关系</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (n:Person) RETURN n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/xG1nWKAfVhZUSbt.png" srcset="/img/loading.gif" lazyload alt="image-20220203103532784">    </p>
<h2 id="4-查询关系"><a href="#4-查询关系" class="headerlink" title="4 查询关系"></a><strong>4 查询关系</strong></h2><p>在Cypher中，关系分为三种：符号“–”，表示有关系，忽略关系的类型和方向；符号“–&gt;”和“&lt;–”，表示有方向的关系；</p>
<h3 id="4-1-查询整个数据图形"><a href="#4-1-查询整个数据图形" class="headerlink" title="4.1 查询整个数据图形"></a><strong>4.1 查询整个数据图形</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n) return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/SgaheU1cTzm8r9k.png" srcset="/img/loading.gif" lazyload alt="image-20220203103717979"></p>
<h3 id="4-2-查询跟指定节点有关系的节点"><a href="#4-2-查询跟指定节点有关系的节点" class="headerlink" title="4.2 查询跟指定节点有关系的节点"></a><strong>4.2 查询跟指定节点有关系的节点</strong></h3><p>查询跟Movie标签有关系的所有节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n) -- (m:Movie) return n;<br></code></pre></td></tr></table></figure>

<h3 id="4-3-查询有向关系的节点"><a href="#4-3-查询有向关系的节点" class="headerlink" title="4.3 查询有向关系的节点"></a><strong>4.3 查询有向关系的节点</strong></h3><p>查询和刘德华有关系的电影</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)--&gt;(movie:Movie) RETURN movie;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/vfBJL3xPmqyW7Sa.png" srcset="/img/loading.gif" lazyload alt="image-20220203104152249"></p>
<h3 id="4-4-为关系命名"><a href="#4-4-为关系命名" class="headerlink" title="4.4  为关系命名"></a>4.4  为关系命名</h3><p><strong>通过[r]为关系定义一个变量名，通过函数type获取关系的类型</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(:Movie) RETURN r,type(r);<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/MozTqZQLaX6v9yY.png" srcset="/img/loading.gif" lazyload alt="image-20220203104533629"></p>
<h3 id="4-5-查询特定的关系类型"><a href="#4-5-查询特定的关系类型" class="headerlink" title="4.5 查询特定的关系类型"></a>4.5 查询特定的关系类型</h3><p><strong>通过[Variable:RelationshipType{Key:Value}]指定关系的类型和属性</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r:出演&#123;partner:&#x27;张国荣&#x27;&#125;]-&gt;(:Movie) RETURN r,type(r);<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/dXoCYZw4lH2Ef9N.png" srcset="/img/loading.gif" lazyload alt="image-20220203105741475"></p>
<p>查询 刘德华和张国荣合作过的电影</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r:出演&#123;partner:&#x27;张国荣&#x27;&#125;]-&gt;(m:Movie) RETURN m;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/U2HgCf6Xm7u9Fri.png" srcset="/img/loading.gif" lazyload alt="image-20220203105853390"></p>
<p>查询被刘德华称呼为甜心的女儿</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r:女儿&#123;nickname:&#x27;甜心&#x27;&#125;]-&gt;(m:Person) return m<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/bXeZQ86TjsrxBAC.png" srcset="/img/loading.gif" lazyload alt="image-20220203110032549"></p>
<p>查询刘德华的老婆是谁</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person&#123;name: &#x27;刘德华&#x27;&#125;)-[:wife]-&gt;(a:Person) return a<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/jyHaSQF4ILCwRD2.png" srcset="/img/loading.gif" lazyload alt="image-20220203110201732"></p>
<p>刘德华出演过的电影</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (:Person&#123;name:&#x27;刘德华&#x27;&#125;)-[r:`出演`]-&gt;(a:Movie) return a<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/459SoWgJyBxRM6f.png" srcset="/img/loading.gif" lazyload alt="image-20220203110423523"></p>
<h2 id="5-删除"><a href="#5-删除" class="headerlink" title="5 删除"></a><strong>5 删除</strong></h2><h3 id="5-1-删除节点"><a href="#5-1-删除节点" class="headerlink" title="5.1 删除节点"></a><strong>5.1 删除节点</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:City &#123; name: &#x27;北京&#x27;&#125;)<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:City&#123;name:&#x27;北京&#x27;&#125;) delete n<br></code></pre></td></tr></table></figure>

<h3 id="5-2-删除关系"><a href="#5-2-删除关系" class="headerlink" title="5.2 删除关系"></a><strong>5.2 删除关系</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (a:Person&#123;name:&#x27;刘德华&#x27;&#125;)-[r:父亲]-&gt;(b:Person&#123;name:&#x27;刘向蕙&#x27;&#125;) delete  r<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (a:Person&#123;name:&#x27;刘向蕙&#x27;&#125;)-[r:女儿]-&gt;(b:Person&#123;name:&#x27;刘德华&#x27;&#125;) delete  r<br></code></pre></td></tr></table></figure>

<h3 id="5-4-强制删除节点和关系"><a href="#5-4-强制删除节点和关系" class="headerlink" title="5.4 强制删除节点和关系"></a><strong>5.4 强制删除节点和关系</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match  (n:`美国军事基地`) where n.name =&#x27;挂载&#x27;  detach delete n<br></code></pre></td></tr></table></figure>

<h2 id="6-常用查询关键词"><a href="#6-常用查询关键词" class="headerlink" title="6 常用查询关键词"></a><strong>6 常用查询关键词</strong></h2><h3 id="6-1-count"><a href="#6-1-count" class="headerlink" title="6.1 count"></a><strong>6.1 count</strong></h3><p>查询Person 一共有多少人</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person ) return count(n)<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/7CQhi1WDxgd3vo4.png" srcset="/img/loading.gif" lazyload alt="image-20220203111153234"></p>
<p>查询标签(Person)中born=1966的一共有多少节点（人）： </p>
<p>两种写法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person) where  n.born=1966   return  count(n) <br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person&#123;born:1966&#125;)  return  count(n)  //特别注意类型,如果存的类似是数字类型,使用字符串就查不出来<br></code></pre></td></tr></table></figure>

<h3 id="6-2-Limit-限制查询条数"><a href="#6-2-Limit-限制查询条数" class="headerlink" title="6.2 Limit 限制查询条数"></a><strong>6.2 Limit 限制查询条数</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person) return n limit 3<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/MIfnZu3qNz6mSgl.png" srcset="/img/loading.gif" lazyload alt="image-20220203111530535"></p>
<p><img src="https://s2.loli.net/2022/02/03/1R2ViCrJTX7SGo8.png" srcset="/img/loading.gif" lazyload alt="image-20220203111556143"></p>
<h3 id="6-3-Distinct"><a href="#6-3-Distinct" class="headerlink" title="6.3 Distinct"></a><strong>6.3 Distinct</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person) return  distinct(n.born)![0]<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/Dux8POUrn21KfMY.png" srcset="/img/loading.gif" lazyload alt="image-20220203111927386"></p>
<h3 id="6-4-Order-by"><a href="#6-4-Order-by" class="headerlink" title="6.4 Order by"></a><strong>6.4 Order by</strong></h3><p>默认升序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match(n:Person) return n order by n.born<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/SN23nMdjW7BZbCA.png" srcset="/img/loading.gif" lazyload alt="image-20220203112225444"></p>
<p>升序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match(n:Person) return n order by n.born asc <br></code></pre></td></tr></table></figure>

<p>降序：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match(n:Person) return n order by n.born desc<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/AGU9lc2Et65xHnW.png" srcset="/img/loading.gif" lazyload alt="image-20220203112344584"></p>
<h3 id="6-5-根据id查找"><a href="#6-5-根据id查找" class="headerlink" title="6.5 根据id查找"></a><strong>6.5 根据id查找</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n) where id(n)=9 return n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/2Pjig78sUwhrz63.png" srcset="/img/loading.gif" lazyload alt="image-20220203112558387"></p>
<h3 id="6-6-In的用法"><a href="#6-6-In的用法" class="headerlink" title="6.6 In的用法"></a><strong>6.6 In的用法</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n) where ID(n) IN[353,145,547] return n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/mAUQcC4lEjGxh8F.png" srcset="/img/loading.gif" lazyload alt="image-20220203113259200"></p>
<h3 id="6-7-Exists"><a href="#6-7-Exists" class="headerlink" title="6.7 Exists"></a><strong>6.7 Exists</strong></h3><p>节点存在 name这个属性的记录：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n) where exists(n.title) return n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/SA5os9HZB6UlvT8.png" srcset="/img/loading.gif" lazyload alt="image-20220203113429708"></p>
<h3 id="6-8-With"><a href="#6-8-With" class="headerlink" title="6.8 With"></a><strong>6.8 With</strong></h3><p>查询name以‘刘’开头的节点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n) where n.name starts with &#x27;刘&#x27; return n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/98hXYdGVkucFKTn.png" srcset="/img/loading.gif" lazyload alt="image-20220203113542424"></p>
<p>查询name以‘明’结尾的节点：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n) where n.name ends with &#x27;齐&#x27; return n<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/4WH7zhjsgvRpKuE.png" srcset="/img/loading.gif" lazyload alt="image-20220203113641533"></p>
<h3 id="6-9-Contains"><a href="#6-9-Contains" class="headerlink" title="6.9 Contains"></a><strong>6.9 Contains</strong></h3><p>查询title中含有 ‘侠侣’的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Movie) where n.title Contains &#x27;侠侣&#x27; return n<br></code></pre></td></tr></table></figure>

<h3 id="6-10-Union-all-Union"><a href="#6-10-Union-all-Union" class="headerlink" title="6.10 Union all (Union)"></a><img src="https://s2.loli.net/2022/02/03/w5palPy1YgTfkxS.png" srcset="/img/loading.gif" lazyload alt="image-20220203113806845"><strong>6.10 Union all (Union)</strong></h3><p>求并集，不去重（去重用Union, as 取别名）:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match(n:Person) where n.born=1966 return n.name as name<br>Union all<br>Match(n:Movie) where n.released=1983 return n.title as name<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/I3DfJ6msNTGLYZb.png" srcset="/img/loading.gif" lazyload alt="image-20220203113949112"></p>
<h2 id="7-更新"><a href="#7-更新" class="headerlink" title="7. 更新"></a><strong>7. 更新</strong></h2><h3 id="7-1-创建一个完整的Path"><a href="#7-1-创建一个完整的Path" class="headerlink" title="7.1 创建一个完整的Path"></a><strong>7.1 创建一个完整的Path</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">CREATE p =(m:Person&#123; name:&#x27;刘亦菲&#x27;,title:&quot;演员&quot; &#125;)-[:签约]-&gt;(neo)&lt;-[:签约]-(n:Person &#123; name: &#x27;赵薇&#x27;,title:&quot;投资人&quot; &#125;)<br>RETURN p<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/uhiIdG9JtHSvnoW.png" srcset="/img/loading.gif" lazyload alt="image-20220203115659660"></p>
<h3 id="7-2-为节点增加一个属性"><a href="#7-2-为节点增加一个属性" class="headerlink" title="7.2 为节点增加一个属性"></a><strong>7.2 为节点增加一个属性</strong></h3><p>通过节点的ID获取节点，Neo4j推荐通过where子句和ID函数来实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n)<br>where id(n)=11<br>set n.name = &#x27;华谊兄弟&#x27;<br>return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/V14qX5UhGEZyFz7.png" srcset="/img/loading.gif" lazyload alt="image-20220203115735318"></p>
<p><strong>为节点移除属性</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (n:农业) where id(n)=17816137 remove n.sortcode,n.targettable,n.unit,n.uuid<br></code></pre></td></tr></table></figure>

<h3 id="7-3-为节点增加标签"><a href="#7-3-为节点增加标签" class="headerlink" title="7.3 为节点增加标签"></a><strong>7.3 为节点增加标签</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n)<br>where id(n)=11<br>set n:公司<br>return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/cuht9RON7U1d8mB.png" srcset="/img/loading.gif" lazyload alt="image-20220203120010862"></p>
<h3 id="7-4-为关系增加属性"><a href="#7-4-为关系增加属性" class="headerlink" title="7.4 为关系增加属性"></a><strong>7.4 为关系增加属性</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c">match (n)-[r]-&gt;(m)<br><span class="hljs-function">where <span class="hljs-title">id</span><span class="hljs-params">(n)</span></span>=<span class="hljs-number">10</span> <span class="hljs-function"><span class="hljs-keyword">and</span> <span class="hljs-title">id</span><span class="hljs-params">(m)</span></span>=<span class="hljs-number">11</span><br><span class="hljs-built_in">set</span> r.经纪人=<span class="hljs-string">&#x27;程晨&#x27;</span><br><span class="hljs-keyword">return</span> n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/TO7x9FKcABQWEMq.png" srcset="/img/loading.gif" lazyload alt="image-20220203120501516"></p>
<p>此时图谱效果成</p>
<p>接着让刘德华也和华谊兄弟签约</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:公司)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;华谊兄弟&#x27;<br>CREATE (a)-[d:签约 &#123; 经纪人:&#x27;刘得得&#x27; &#125;]-&gt;(c)<br>RETURN d;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/H8OlbStdpFkVM4B.png" srcset="/img/loading.gif" lazyload alt="image-20220203120752503"></p>
<h3 id="7-5-MERGE"><a href="#7-5-MERGE" class="headerlink" title="7.5 MERGE"></a><strong>7.5 MERGE</strong></h3><p>Merge子句的作用有两个：当模式（Pattern）存在时，匹配该模式；当模式不存在时，创建新的模式，功能是match子句和create的组合。在merge子句之后，可以显式指定on creae和on match子句，用于修改绑定的节点或关系的属性。</p>
<p>通过merge子句，你可以指定图形中必须存在一个节点，该节点必须具有特定的标签，属性等，如果不存在，那么merge子句将创建相应的节点。</p>
<p><strong>通过merge子句匹配搜索模式</strong></p>
<p>匹配模式是：一个节点有Person标签，并且具有name属性；如果数据库不存在该模式，那么创建新的节点；如果存在该模式，那么绑定该节点；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MERGE (m:Person &#123; name: &#x27;迈克尔·杰克逊&#x27; &#125;)<br>RETURN m;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/Ybd4L1iyCqJ8TKe.png" srcset="/img/loading.gif" lazyload alt="image-20220203121023519"></p>
<p><strong>在merge子句中指定on create子句</strong></p>
<p>如果需要创建节点，那么执行on create子句，修改节点的属性；<code>timestamp()</code>时间戳</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MERGE (m:Person &#123; name: &#x27;杰森·斯坦森&#x27; &#125;)<br>ON CREATE SET m.registertime = timestamp()<br>RETURN m.name, m.registertime<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/OVUcAfDN8H2MPhp.png" srcset="/img/loading.gif" lazyload alt="image-20220203121212127"></p>
<p><strong>在merge子句中指定on match子句</strong></p>
<p>如果节点已经存在于数据库中，那么执行on match子句，修改节点的属性；节点属性不存在则新增</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MERGE (m:Person)<br>ON MATCH SET m.registertime = timestamp()<br>RETURN m.name, m.registertime<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/VGTwhEQtyAxbNe3.png" srcset="/img/loading.gif" lazyload alt="image-20220203121519398"></p>
<p><strong>在merge子句中同时指定on create 和 on match子句(没有对应属性则不修改，不会新增属性)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MERGE (m:Person&#123; name: &#x27;李连杰&#x27; &#125;)<br>ON CREATE SET m.registertime = timestamp()<br>ON MATCH SET m.offtime = timestamp()<br>RETURN m.name, m.registertime, m.offtime<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/ySrZTjXzonheHIq.png" srcset="/img/loading.gif" lazyload alt="image-20220203121738648"></p>
<p><strong>merge子句用于match或create一个关系</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (m:Person &#123; name: &#x27;刘德华&#x27; &#125;),(n:Movie &#123; title: &#x27;神雕侠侣&#x27; &#125;)<br>MERGE (m)-[r:导演]-&gt;(n)<br>RETURN m.name, type(r), n.title<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/pxqduUJabfR87Ss.png" srcset="/img/loading.gif" lazyload alt="image-20220203125002679"></p>
<p><strong>merge子句用于match或create多个关系</strong></p>
<p>赵薇既是神雕侠侣的导演,也是神雕侠侣的演员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (m:Person &#123; name: &#x27;赵薇&#x27; &#125;),(n:Movie &#123; title: &#x27;神雕侠侣&#x27; &#125;)<br>MERGE (m)-[r:导演]-&gt;(n)&lt;-[r2:出演]-(m)<br>RETURN m.name, type(r),type(r2), n.title<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/rYKkoxzu7f3yPCQ.png" srcset="/img/loading.gif" lazyload alt="image-20220203164701563"></p>
<p><strong>merge子句用于子查询</strong></p>
<p><strong>先添加基础数据</strong></p>
<p>创建城市节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:City &#123; name: &#x27;北京&#x27;,othername:&#x27;帝都&#x27;&#125;);<br>create (n:City &#123; name: &#x27;香港&#x27;,othername:&#x27;HongKong&#x27;&#125;);<br>create (n:City &#123; name: &#x27;台湾&#x27;,othername:&#x27;湾湾&#x27;&#125;);<br></code></pre></td></tr></table></figure>

<p>为Person标签的每个节点都增加一个属性 bornin</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:Person)<br>set n.bornin = &#x27;&#x27;<br>return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/9NRJYdGWz7FKMnU.png" srcset="/img/loading.gif" lazyload alt="image-20220203164852127"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n)<br>where id(n)=9<br>set n.bornin = &#x27;香港&#x27;<br>return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/5qosTwCljSYymP4.png" srcset="/img/loading.gif" lazyload alt="image-20220203165035186"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n)<br>where n.name=&#x27;金城武&#x27;<br>set n.bornin = &#x27;台湾&#x27;<br>return n;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/dNyL7sjHqWkhKIQ.png" srcset="/img/loading.gif" lazyload alt="image-20220203165143523"></p>
<p><strong>需求:查找刘德华和金城武的信息和所在地的othername(相当于mysql 连表查询)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (p:Person)<br>where p.name=&#x27;刘德华&#x27; or p.name=&#x27;金城武&#x27;<br>MERGE (c:City &#123; name: p.bornin &#125;)<br>RETURN p.name,p.born,p.bornin, c.othername;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/OaZhRCxXv2yFSpj.png" srcset="/img/loading.gif" lazyload alt="image-20220203165406817"></p>
<p>创建刘德华出生地是香港这条关系</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a:Person),(c:City)<br>WHERE a.name = &#x27;刘德华&#x27; AND c.name = &#x27;香港&#x27;<br>CREATE (a)-[r:出生地]-&gt;(c)<br>RETURN r;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/D5LYESXxaO3RuAp.png" srcset="/img/loading.gif" lazyload alt="image-20220203165534007"></p>
<p>需求:给Person中每个节点都创建一个出生地的关系,没有则返回null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (p:Person)<br>MERGE (c:City &#123; name: p.bornin &#125;)<br>MERGE (p)-[r:出生地]-&gt;(c)<br>RETURN p.name, p.bornin, c.othername;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/5EDneQfwYPtbGXx.png" srcset="/img/loading.gif" lazyload alt="image-20220203165645344"></p>
<p>删除这些关系</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (a:Person)-[r:出生地]-&gt;(c:City&#123;name:&#x27;&#x27;&#125;) delete r<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/PqJgw1dVYvfQLcz.png" srcset="/img/loading.gif" lazyload alt="image-20220203165816353"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (a:City)-[r:出生地]-&gt;(c:Person) delete r<br></code></pre></td></tr></table></figure>

<p>查询Person标签中不存在name属性的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match (n:Person) where not exists(n.name) return n<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Match  (n:Person)  where not  exists(n.name)  delete  n<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">create (n:Prize &#123; name: &#x27;金马奖&#x27;&#125;);<br>create (n:Prize &#123; name: &#x27;奥斯卡金奖&#x27;&#125;);<br>create (n:Prize &#123; name: &#x27;金鸡奖&#x27;&#125;);<br>create (n:Prize &#123; name: &#x27;香港电影金像奖&#x27;&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="7-6-跟实体相关的函数"><a href="#7-6-跟实体相关的函数" class="headerlink" title="7.6 跟实体相关的函数"></a><strong>7.6 跟实体相关的函数</strong></h3><p><strong>通过id函数，返回节点或关系的ID</strong></p>
<p><strong>查询Movie标签中和刘德华有关系的电影 id(节点和关系)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(:Movie)<br>RETURN id(r);<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/wpAmrTDytjRO932.png" srcset="/img/loading.gif" lazyload alt="image-20220203170433508"></p>
<p><strong>通过type函数，查询关系的类型</strong></p>
<p><strong>查询Person标签中和刘德华相关的关系(以下三种结果相同)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;()<br>RETURN type(r);<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/KOoVd5LIRAr1ue6.png" srcset="/img/loading.gif" lazyload alt="image-20220203170658396"></p>
<p><strong>通过lables函数，查询节点的标签</strong></p>
<p><strong>查询和刘德华有关系的节点</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(p)<br>RETURN p;<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/nOPSRVkKYm2glMy.png" srcset="/img/loading.gif" lazyload alt="image-20220203170851140"></p>
<p><strong>查询和刘德华有关系的标签(去重)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(p)<br>RETURN distinct(labels(p))<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/FjBpdTghuELfNlM.png" srcset="/img/loading.gif" lazyload alt="image-20220203171026549"></p>
<p><strong>通过keys函数，查看节点或关系的属性键</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a)<br>WHERE a.name = &#x27;刘德华&#x27;<br>RETURN keys(a)<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/QuHUbdMYKvcoA31.png" srcset="/img/loading.gif" lazyload alt="image-20220203171204245"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(p) RETURN distinct(keys(r))<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/P17Ity2G6jcgpvl.png" srcset="/img/loading.gif" lazyload alt="image-20220203171257645"></p>
<p><strong>通过properties()函数，查看节点或关系的属性</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (a)<br>WHERE a.name = &#x27;刘德华&#x27;<br>RETURN properties(a)<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/4ECLnrHsS1ybJNM.png" srcset="/img/loading.gif" lazyload alt="image-20220203171441411"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (:Person &#123; name: &#x27;刘德华&#x27; &#125;)-[r]-&gt;(p) RETURN properties(r)<br></code></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2022/02/03/pLR9nFN6YCd7bqw.png" srcset="/img/loading.gif" lazyload alt="image-20220203171547474"></p>
<h2 id="8-跟索引相关的函数"><a href="#8-跟索引相关的函数" class="headerlink" title="8.跟索引相关的函数"></a><strong>8.跟索引相关的函数</strong></h2><h3 id="8-1-创建索引"><a href="#8-1-创建索引" class="headerlink" title="8.1 创建索引"></a><strong>8.1 创建索引</strong></h3><p><strong>创建单一属性索引</strong></p>
<p><strong>CREATE INDEX ON :Lable(property)</strong></p>
<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">CREATE INDEX ON :Person(name)<br></code></pre></td></tr></table></figure>

<p>给数据库的:Person标签的name属性创建索引</p>
<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Added 1 index, completed after 32 ms.<br></code></pre></td></tr></table></figure>

<p><strong>创建复合属性索引</strong></p>
<p><strong>CREATE INDEX ON :Label(prop1,…,propN)</strong></p>
<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">CREATE INDEX ON :Person(age,country)<br></code></pre></td></tr></table></figure>

<p>Result:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">Added 1 index, completed after 4 ms.<br></code></pre></td></tr></table></figure>

<h3 id="8-2-查询索引"><a href="#8-2-查询索引" class="headerlink" title="8.2 查询索引"></a><strong>8.2 查询索引</strong></h3><p><strong>CALL db.Indexes</strong></p>
<h3 id="8-3-删除索引"><a href="#8-3-删除索引" class="headerlink" title="8.3 删除索引"></a><strong>8.3 删除索引</strong></h3><p><strong>DROP INDEX ON :LABEL(property）</strong></p>
<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">DROP INDEX ON :Person(firstname)<br></code></pre></td></tr></table></figure>



<p><strong>DROP INDEX ON :LABEL(prop1,…,propN)</strong></p>
<p>Query:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">DROP INDEX ON :Person(age,country)<br></code></pre></td></tr></table></figure>



<h3 id="8-4-备份与导入"><a href="#8-4-备份与导入" class="headerlink" title="8.4 备份与导入"></a>8.4 备份与导入</h3><p>备份/导出</p>
<p>要以管理员身份运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">neo4j-admin dump --database=graph.db --to=E:\neo4jdata<br></code></pre></td></tr></table></figure>

<p>导入</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">neo4j-admin load --from=E:\neo4jdata\graph.db.dump --database=graph.db --force<br></code></pre></td></tr></table></figure>

<p>导入csv</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">USING PERIODIC COMMIT 500 LOAD CSV FROM &quot;file:///D:\\test.csv&quot; AS line  MERGE (:`顶顶顶` &#123;name:line[0]&#125;)<br>LOAD CSV WITH HEADERS FROM &quot;file:///C:\\Program Files\\Java\\neo4j-community-3.4.7\\import\\stock_concept.csv&quot;<br>AS line<br>return line.n<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">USING PERIODIC COMMIT 10  <br>LOAD CSV FROM &quot;file:///node.csv&quot; AS line  <br>create (a:Node&#123;name:line[0]&#125;)  <br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">USING PERIODIC COMMIT<br>LOAD CSV FROM &#x27;file:///concept.csv&#x27; AS row<br>CREATE (n:概念&#123;name:row[1],uuid:row[0]&#125;)<br></code></pre></td></tr></table></figure>

<p>csv 不带header方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">USING PERIODIC COMMIT<br>LOAD CSV  FROM &quot;file:///executive_stock.csv&quot; AS row<br>MATCH (n:高管 &#123;uuid: row[0]&#125;)<br>MATCH (m:企业 &#123;uuid: row[1]&#125;)<br>MERGE (n)-[:RE&#123;name:row[2]&#125;]-&gt;(m) <br></code></pre></td></tr></table></figure>

<p>带header方式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">USING PERIODIC COMMIT<br>LOAD CSV WITH HEADERS FROM &#x27;file:///industry.csv&#x27; AS row<br>CREATE (:行业&#123;name:row.name,uuid:row.uuid&#125;)<br></code></pre></td></tr></table></figure>

<p><strong>apoc 导入</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">call apoc.import.csv([&#123;fileName: &#x27;D:\\text\\ctwh\\ctwh.csv&#x27;, labels: [&#x27;ctwh&#x27;]&#125;], [], &#123;&#125;)<br></code></pre></td></tr></table></figure>

<p><strong>apoc导出</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (n:`zhctwh`)-[r:RE]-&gt;(m:`zhctwh`)<br>WITH collect(DISTINCT n) AS cn, collect(DISTINCT m) AS cm, collect(r) AS rships<br>CALL apoc.export.csv.data(cn+cm, rships, &quot;ctwh-re.csv&quot;, &#123;&#125;)<br>YIELD file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data<br>RETURN file, source, format, nodes, relationships, properties, time, rows, batchSize, batches, done, data<br></code></pre></td></tr></table></figure>

<p>注意：导出文件如果如上面语句没写路径，默认在安装目录的根目录下，bin所在的同级目录</p>
<h2 id="关于neo4j查询多深度关系节点"><a href="#关于neo4j查询多深度关系节点" class="headerlink" title="关于neo4j查询多深度关系节点"></a><strong>关于neo4j查询多深度关系节点</strong></h2><h3 id="1-使用with关键字"><a href="#1-使用with关键字" class="headerlink" title="1.使用with关键字"></a><strong>1.使用with关键字</strong></h3><p>查询三层级关系节点如下：with可以将前面查询结果作为后面查询条件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (na:company)-[re]-&gt;(nb:company) where na.id = &#x27;11&#x27; WITH na,re,nb match (nb:company)-[re2]-&gt;(nc:company) return na,re,nb,re2,nc<br></code></pre></td></tr></table></figure>

<h3 id="2-直接拼接关系节点查询"><a href="#2-直接拼接关系节点查询" class="headerlink" title="2.直接拼接关系节点查询"></a><strong>2.直接拼接关系节点查询</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (na:company&#123;id:&#x27;12399145&#x27;&#125;)-[re]-&gt;(nb:company)-[re2]-&gt;(nc:company) return na,re,nb,re2,nc<br></code></pre></td></tr></table></figure>

<h3 id="3-为了方便，可以将查询结果赋给变量，然后返回"><a href="#3-为了方便，可以将查询结果赋给变量，然后返回" class="headerlink" title="3.为了方便，可以将查询结果赋给变量，然后返回"></a><strong>3.为了方便，可以将查询结果赋给变量，然后返回</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match data=(na:company&#123;id:&#x27;12&#x27;&#125;)-[re]-&gt;(nb:company)-[re2]-&gt;(nc:company) return data<br></code></pre></td></tr></table></figure>

<h3 id="4-使用深度运算符"><a href="#4-使用深度运算符" class="headerlink" title="4.使用深度运算符"></a><strong>4.使用深度运算符</strong></h3><p>当实现多深度关系节点查询时，显然使用以上方式比较繁琐。</p>
<p>可变数量的关系-&gt;节点可以使用**-[:TYPE*minHops..maxHops]-&gt;**。</p>
<p>查询：</p>
<p>如果在1到3的关系中存在路径，将返回开始点和结束点。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match data=(na:company&#123;id:&#x27;12399145&#x27;&#125;)-[*1..3]-&gt;(nb:company) return data<br></code></pre></td></tr></table></figure>

<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="使用APOC库"><a href="#使用APOC库" class="headerlink" title="使用APOC库"></a><strong>使用APOC库</strong></h3><p><a target="_blank" rel="noopener" href="https://neo4j-contrib.github.io/neo4j-apoc-procedures/">https://neo4j-contrib.github.io/neo4j-apoc-procedures/</a></p>
<h3 id="合并重复节点"><a href="#合并重复节点" class="headerlink" title="合并重复节点"></a><strong>合并重复节点</strong></h3><p>先装apoc  过程如下</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/graphway/article/details/78957415">https://blog.csdn.net/graphway/article/details/78957415</a></p>
<p>安装完成 执行  <code>return apoc.version() </code> 查看下版本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (n:国家电网)<br>WITH n.name AS name, COLLECT(n) AS nodelist, COUNT(*) AS count<br>WHERE count &gt; 1<br>CALL apoc.refactor.mergeNodes(nodelist) YIELD node<br>RETURN node<br></code></pre></td></tr></table></figure>

<p>查询某个节点有关系的3级及以内的路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">MATCH (n:`贵州`) WHERE n.name=&#x27;交通事件&#x27;<br>CALL apoc.path.spanningTree(n, &#123;maxLevel:3&#125;) YIELD path<br>RETURN path;<br></code></pre></td></tr></table></figure>

<h3 id="复制领域"><a href="#复制领域" class="headerlink" title="复制领域"></a><strong>复制领域</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n:菊花) MERGE (:大萨达&#123;name:n.name&#125;)<br>match(n:菊花)-[r]-&gt;(q:菊花)<br>with n, r, q<br>match (o:大萨达&#123;name:n.name&#125;), (m:大萨达&#123;name:q.name&#125;)<br>MERGE (o)-[:RE&#123;name:r.name&#125;]-&gt;(m)<br></code></pre></td></tr></table></figure>

<h3 id="keys函数"><a href="#keys函数" class="headerlink" title="keys函数"></a><strong>keys函数</strong></h3><p>查询某个属性大于0 的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where any(x in keys(n) where n[x] &gt; 0) return n<br></code></pre></td></tr></table></figure>

<p>查询所有属性大于0的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where all(x.uuid in keys(n) where n[x.uuid] &gt; 0) return n   <br></code></pre></td></tr></table></figure>

<p>x在any中是一个变量，并不是属性</p>
<p>uuid大于0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where any(uuid in keys(n) where n[uuid] &gt; 0) return n <br></code></pre></td></tr></table></figure>

<p>所有uuid都大于0</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where all(uuid in keys(n) where n[uuid] &gt; 0) return n<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match(n) where any(querytype in keys(n) where n[querytype] = 0) return n<br></code></pre></td></tr></table></figure>

<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a><strong>修改密码</strong></h3><p>进入neo4j提供的可视化界面broswer</p>
<p>输入： :server change-password</p>
<p>键入原密码及新密码，即可修改</p>
<h3 id="设置权重"><a href="#设置权重" class="headerlink" title="设置权重"></a><strong>设置权重</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:`测试权重`&#123;name:&#x27;项目名称&#x27;&#125;),(m:`测试权重`&#123;name:&#x27;设计速度&#x27;&#125;)<br>MATCH p=(n)-[*]-(m)<br>with p,reduce(s=0,r in rels(p)|s+toInt(r.name)) as dist<br>return p,dist order by dist asc<br></code></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:`交通规划设计`&#123;name:&#x27;项目名称&#x27;&#125;),(m:`交通规划设计`&#123;name:&#x27;设计速度&#x27;&#125;)<br>CALL apoc.algo.dijkstra(n,m,&#x27;RE&#x27;,&#x27;weight&#x27;)yield path as path,weight as weight<br>return path,weight<br></code></pre></td></tr></table></figure>

<h3 id="最短路径"><a href="#最短路径" class="headerlink" title="最短路径"></a><strong>最短路径</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:`测试权重`&#123;name:&#x27;项目名称&#x27;&#125;),(m:`测试权重`&#123;name:&#x27;设计速度&#x27;&#125;),<br>p=shortestpath((n)-[*..10]-(m))<br>RETURN p<br></code></pre></td></tr></table></figure>

<h3 id="所有路径"><a href="#所有路径" class="headerlink" title="所有路径"></a><strong>所有路径</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n:`测试权重`&#123;name:&#x27;项目名称&#x27;&#125;),(m:`测试权重`&#123;name:&#x27;设计速度&#x27;&#125;),<br><br>p=allshortestpaths((n)-[*..10]-(m))<br><br>RETURN p<br></code></pre></td></tr></table></figure>

<h3 id="多个节点两两间互相求最短路径"><a href="#多个节点两两间互相求最短路径" class="headerlink" title="多个节点两两间互相求最短路径"></a><strong>多个节点两两间互相求最短路径</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cypher">with [&#x27;项目名称&#x27;,&#x27;工可批复单位&#x27;,&#x27;设计速度&#x27;] as indicator_list<br>match (n:`交通规划设计`) where n.name in indicator_list<br>with collect(n) as nodes<br>unwind nodes as source<br>unwind nodes as target<br>with source,target where id(source)<br>match paths = shortestPath((source)-[*0..2]-(target)) <br>with paths limit 20000<br>return paths<br></code></pre></td></tr></table></figure>

<p>带条件的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cypher">with [3105, 200025928, 200025929, 151286502, 135660351] as id_list<br>match (v:vertices) where v.id in id_list<br>  with collect(v) as nodes<br>  unwind nodes as source<br>  unwind nodes as target<br>  with source,target where id(source)<br>match paths = shortestPath((source)-[:HOLDER|MANAGER*0..2]-(target)) where all(x in nodes(paths) where x.id&lt;&gt;3105)<br>  with paths limit 20000<br>  return paths<br></code></pre></td></tr></table></figure>

<h3 id="多标签查询"><a href="#多标签查询" class="headerlink" title="多标签查询"></a>多标签查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cypher">match (n) where any(label in labels(n) WHERE label in [&#x27;A 标签&#x27;, &#x27;B 标签&#x27;]) return n<br></code></pre></td></tr></table></figure>

<h3 id="查询字段类型"><a href="#查询字段类型" class="headerlink" title="查询字段类型"></a>查询字段类型</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cypher">apoc.meta.type<br>String cypher = &quot;match(n:`zhctwh`) where  apoc.meta.type(n.similar)=&#x27;STRING&#x27; return n&quot;;<br></code></pre></td></tr></table></figure>


            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/">知识图谱</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/neo4j/">neo4j</a>
                    
                      <a class="hover-with-bg" href="/tags/cypher/">cypher</a>
                    
                      <a class="hover-with-bg" href="/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/">知识图谱</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/01/29/%E7%AC%94%E8%AE%B0/%E8%A7%A3%E5%86%B3%E8%AF%AD%E9%9B%80%E5%AF%BC%E5%87%BAmarkdown%E6%96%87%E4%BB%B6%E5%9B%BE%E7%89%87%E4%B8%8D%E6%98%BE%E7%A4%BA%E9%97%AE%E9%A2%98/">
                        <span class="hidden-mobile">解决语雀导出markdown文件图片不显示问题</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"bsazSpg1oz4dmytEUahhi503-gzGzoHsz","appKey":"1GClCXtwE6bfNzVVISE2bWTQ","path":"window.location.pathname","placeholder":null,"avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":false,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":false},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  

  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
